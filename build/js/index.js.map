{"version":3,"sources":["index.js"],"names":["page","cita","name","date","hour","services","document","addEventListener","App","showServices","showSection","changeSection","prePage","nextPage","validPage","showResume","nameDate","valitDate","dayDate","async","result","fetch","db","json","servicios","forEach","service","id","price","servceName","createElement","textContent","classList","add","servicePrice","serviceDiv","dataset","serviceID","onclick","selectService","appendChild","querySelector","error","console","log","e","element","target","tagName","parentElement","contains","remove","parseInt","deleteService","objService","firstElementChild","nextElementSibling","addService","filter","preSection","preTab","querySelectorAll","link","preventDefault","step","getElementById","btnNext","btnPre","divResume","Object","values","includes","noService","nameTxt","value","trim","length","showAlert","alert","message","type","setTimeout","inputDate","day","Date","getUTCDay","today","fecha","year","getFullYear","month","getMonth","getDate","min"],"mappings":"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","file":"index.js","sourcesContent":["let page = 1;\r\n\r\nconst cita = {\r\n    name: \"\",\r\n    date: \"\",\r\n    hour: \"\",\r\n    services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    App();\r\n});\r\n\r\nconst App = () => {\r\n    showServices();\r\n\r\n    showSection();\r\n\r\n    changeSection();\r\n\r\n    prePage();\r\n\r\n    nextPage();\r\n\r\n    validPage();\r\n\r\n    showResume();\r\n\r\n    nameDate();\r\n\r\n    valitDate();\r\n\r\n    dayDate();\r\n};\r\n\r\nasync function showServices() {\r\n    try {\r\n        const result = await fetch(\"./servicios.json\");\r\n        const db = await result.json();\r\n        const { servicios } = db;\r\n\r\n        servicios.forEach((service) => {\r\n            const { id, name, price } = service;\r\n\r\n            const servceName = document.createElement(\"p\");\r\n            servceName.textContent = name;\r\n            servceName.classList.add(\"service-name\");\r\n\r\n            const servicePrice = document.createElement(\"p\");\r\n            servicePrice.textContent = `$ ${price}`;\r\n            servicePrice.classList.add(\"service-price\");\r\n\r\n            const serviceDiv = document.createElement(\"div\");\r\n            serviceDiv.classList.add(\"service\");\r\n            serviceDiv.dataset.serviceID = id;\r\n\r\n            serviceDiv.onclick = selectService;\r\n\r\n            serviceDiv.appendChild(servceName);\r\n            serviceDiv.appendChild(servicePrice);\r\n\r\n            document.querySelector(\"#servicio\").appendChild(serviceDiv);\r\n        });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction selectService(e) {\r\n    let element;\r\n    if (e.target.tagName === \"P\") {\r\n        element = e.target.parentElement;\r\n    } else {\r\n        element = e.target;\r\n    }\r\n\r\n    if (element.classList.contains(\"select\")) {\r\n        element.classList.remove(\"select\");\r\n        const id = parseInt(element.dataset.serviceID);\r\n        deleteService(id);\r\n    } else {\r\n        element.classList.add(\"select\");\r\n\r\n        const objService = {\r\n            id: parseInt(element.dataset.serviceID),\r\n            name: element.firstElementChild.textContent,\r\n            price: element.firstElementChild.nextElementSibling.textContent,\r\n        };\r\n        // console.log(objService);\r\n        addService(objService);\r\n    }\r\n}\r\n\r\nconst deleteService = (id) => {\r\n    const { services } = cita;\r\n    cita.services = services.filter((service) => service.id !== id);\r\n    // console.log(cita);\r\n};\r\n\r\nconst addService = (objService) => {\r\n    const { services } = cita;\r\n    cita.services = [...services, objService];\r\n    // console.log(cita);\r\n};\r\n\r\nconst showSection = () => {\r\n    const preSection = document.querySelector(\".show\");\r\n    if (preSection) {\r\n        preSection.classList.remove(\"show\");\r\n    }\r\n\r\n    const actualSection = document.querySelector(`#step${page}`);\r\n    actualSection.classList.add(\"show\");\r\n\r\n    const preTab = document.querySelector(\".tabs .actual\");\r\n    if (preTab) {\r\n        preTab.classList.remove(\"actual\");\r\n    }\r\n\r\n    const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n    tab.classList.add(\"actual\");\r\n};\r\n\r\nconst changeSection = () => {\r\n    const links = document.querySelectorAll(\".tabs button\");\r\n\r\n    links.forEach((link) => {\r\n        link.addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            page = parseInt(e.target.dataset.step);\r\n\r\n            showSection();\r\n            validPage();\r\n        });\r\n    });\r\n};\r\nconst nextPage = () => {\r\n    const btnNext = document.getElementById(\"next\");\r\n\r\n    btnNext.addEventListener(\"click\", () => {\r\n        page++;\r\n        validPage();\r\n    });\r\n};\r\n\r\nconst prePage = () => {\r\n    const btnPre = document.getElementById(\"previous\");\r\n    btnPre.addEventListener(\"click\", () => {\r\n        page--;\r\n        validPage();\r\n    });\r\n};\r\n\r\nconst validPage = () => {\r\n    const btnNext = document.getElementById(\"next\");\r\n    const btnPre = document.getElementById(\"previous\");\r\n\r\n    if (page === 1) {\r\n        btnNext.classList.remove(\"d-none\");\r\n        btnPre.classList.add(\"d-none\");\r\n    } else if (page === 3) {\r\n        btnNext.classList.add(\"d-none\");\r\n        btnPre.classList.remove(\"d-none\");\r\n    } else {\r\n        btnNext.classList.remove(\"d-none\");\r\n        btnPre.classList.remove(\"d-none\");\r\n    }\r\n\r\n    showSection();\r\n};\r\n\r\nconst showResume = () => {\r\n    const { name, date, hour, service } = cita;\r\n\r\n    const divResume = document.querySelector(\".resumeContent\");\r\n\r\n    if (Object.values(cita).includes(\"\")) {\r\n        const noService = document.createElement(\"p\");\r\n        noService.textContent = \"Missing service data, time, date or name\";\r\n        noService.classList.add(\"invalitDate\");\r\n\r\n        divResume.appendChild(noService);\r\n    }\r\n};\r\n\r\nconst nameDate = () => {\r\n    const inputName = document.getElementById(\"name\");\r\n    inputName.addEventListener(\"input\", (e) => {\r\n        const nameTxt = e.target.value.trim();\r\n\r\n        if (nameTxt === \"\" || nameTxt.length < 3) {\r\n            showAlert(\"eres puto\", \"error\");\r\n        } else {\r\n            const alert = document.querySelector(\".alert\");\r\n            if (alert) {\r\n                alert.remove();\r\n            }\r\n            cita.name = nameTxt;\r\n            // console.log(cita);\r\n        }\r\n    });\r\n};\r\n\r\nconst showAlert = (message, type) => {\r\n    const preAlert = document.querySelector(\".alert\");\r\n    if (preAlert) {\r\n        return;\r\n    }\r\n    // console.log(`Hijole carnal pero el patron dice que ${message}`);\r\n\r\n    const alert = document.createElement(\"div\");\r\n    alert.textContent = message;\r\n    alert.classList.add(\"alert\");\r\n\r\n    if (type === \"error\") {\r\n        alert.classList.add(\"error\");\r\n    }\r\n    const formulario = document.querySelector(\".formulario\");\r\n    formulario.appendChild(alert);\r\n    // console.log(alert);\r\n\r\n    setTimeout(() => {\r\n        alert.remove();\r\n    }, 3000);\r\n};\r\n\r\nconst dayDate = () => {\r\n    const inputDate = document.getElementById(\"date\");\r\n    inputDate.addEventListener(\"input\", (e) => {\r\n        const day = new Date(e.target.value).getUTCDay();\r\n        if ([0, 6].includes(day)) {\r\n            e.preventDefault();\r\n            inputDate.value = \"\";\r\n            showAlert(\"the weekends are not valid dude\", \"error\");\r\n        } else {\r\n            cita.date = inputDate.value;\r\n            console.log(cita);\r\n        }\r\n        /* const options = {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long'\r\n        };\r\n        console.log(day.toLocaleDateString('es-ES', options)); */\r\n    });\r\n};\r\nconst valitDate = () => {\r\n    const inputDate = document.querySelector(\"#date\");\r\n    const today = new Date();\r\n    let fecha = \"\";\r\n    const year = today.getFullYear();\r\n    const month = today.getMonth() + 1;\r\n    const day = today.getDate();\r\n\r\n    if (month < 10 && day < 10) {\r\n        fecha = `${year}-0${month}-0${day}`;\r\n    } else if (day < 10 && month >= 10) {\r\n        fecha = `${year}-${month}-0${day}`;\r\n    } else {\r\n        fecha = `${year}-${month}-${day}`;\r\n    }\r\n\r\n    inputDate.min = fecha;\r\n};\r\n"]}