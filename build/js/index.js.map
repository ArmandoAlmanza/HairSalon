{"version":3,"sources":["index.js"],"names":["page","cita","name","date","hour","services","document","addEventListener","App","showServices","showSection","changeSection","prePage","nextPage","validPage","showResume","nameDate","valitDate","dayDate","hourDate","async","result","fetch","db","json","servicios","forEach","service","id","price","servceName","createElement","textContent","classList","add","servicePrice","serviceDiv","dataset","serviceID","onclick","selectService","appendChild","querySelector","error","console","log","e","element","target","tagName","parentElement","contains","remove","parseInt","deleteService","objService","firstElementChild","nextElementSibling","addService","filter","preSection","preTab","querySelectorAll","link","preventDefault","step","getElementById","btnNext","btnPre","divResume","firstChild","removeChild","Object","values","includes","noService","headingDate","innerHTML","serviceDate","headingService","mount","container","serviceText","total","split","trim","nameTxt","value","length","showAlert","alert","message","type","setTimeout","inputDate","day","Date","getUTCDay","today","fecha","year","getFullYear","month","getMonth","getDate","min","inputHour","dateHour"],"mappings":"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","file":"index.js","sourcesContent":["let page = 1;\r\n\r\nconst cita = {\r\n    name: \"\",\r\n    date: \"\",\r\n    hour: \"\",\r\n    services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    App();\r\n});\r\n\r\nconst App = () => {\r\n    showServices();\r\n\r\n    showSection();\r\n\r\n    changeSection();\r\n\r\n    prePage();\r\n\r\n    nextPage();\r\n\r\n    validPage();\r\n\r\n    showResume();\r\n\r\n    nameDate();\r\n\r\n    valitDate();\r\n\r\n    dayDate();\r\n\r\n    hourDate();\r\n};\r\n\r\nasync function showServices() {\r\n    try {\r\n        const result = await fetch(\"./servicios.json\");\r\n        const db = await result.json();\r\n        const { servicios } = db;\r\n\r\n        servicios.forEach((service) => {\r\n            const { id, name, price } = service;\r\n\r\n            const servceName = document.createElement(\"p\");\r\n            servceName.textContent = name;\r\n            servceName.classList.add(\"service-name\");\r\n\r\n            const servicePrice = document.createElement(\"p\");\r\n            servicePrice.textContent = `$ ${price}`;\r\n            servicePrice.classList.add(\"service-price\");\r\n\r\n            const serviceDiv = document.createElement(\"div\");\r\n            serviceDiv.classList.add(\"service\");\r\n            serviceDiv.dataset.serviceID = id;\r\n\r\n            serviceDiv.onclick = selectService;\r\n\r\n            serviceDiv.appendChild(servceName);\r\n            serviceDiv.appendChild(servicePrice);\r\n\r\n            document.querySelector(\"#servicio\").appendChild(serviceDiv);\r\n        });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction selectService(e) {\r\n    let element;\r\n    if (e.target.tagName === \"P\") {\r\n        element = e.target.parentElement;\r\n    } else {\r\n        element = e.target;\r\n    }\r\n\r\n    if (element.classList.contains(\"select\")) {\r\n        element.classList.remove(\"select\");\r\n        const id = parseInt(element.dataset.serviceID);\r\n        deleteService(id);\r\n    } else {\r\n        element.classList.add(\"select\");\r\n\r\n        const objService = {\r\n            id: parseInt(element.dataset.serviceID),\r\n            name: element.firstElementChild.textContent,\r\n            price: element.firstElementChild.nextElementSibling.textContent,\r\n        };\r\n        // console.log(objService);\r\n        addService(objService);\r\n    }\r\n}\r\n\r\nconst deleteService = (id) => {\r\n    const { services } = cita;\r\n    cita.services = services.filter((service) => service.id !== id);\r\n    // console.log(cita);\r\n};\r\n\r\nconst addService = (objService) => {\r\n    const { services } = cita;\r\n    cita.services = [...services, objService];\r\n    // console.log(cita);\r\n};\r\n\r\nconst showSection = () => {\r\n    const preSection = document.querySelector(\".show\");\r\n    if (preSection) {\r\n        preSection.classList.remove(\"show\");\r\n    }\r\n\r\n    const actualSection = document.querySelector(`#step${page}`);\r\n    actualSection.classList.add(\"show\");\r\n\r\n    const preTab = document.querySelector(\".tabs .actual\");\r\n    if (preTab) {\r\n        preTab.classList.remove(\"actual\");\r\n    }\r\n\r\n    const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n    tab.classList.add(\"actual\");\r\n};\r\n\r\nconst changeSection = () => {\r\n    const links = document.querySelectorAll(\".tabs button\");\r\n\r\n    links.forEach((link) => {\r\n        link.addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            page = parseInt(e.target.dataset.step);\r\n\r\n            showSection();\r\n            validPage();\r\n        });\r\n    });\r\n};\r\nconst nextPage = () => {\r\n    const btnNext = document.getElementById(\"next\");\r\n\r\n    btnNext.addEventListener(\"click\", () => {\r\n        page++;\r\n        validPage();\r\n    });\r\n};\r\n\r\nconst prePage = () => {\r\n    const btnPre = document.getElementById(\"previous\");\r\n    btnPre.addEventListener(\"click\", () => {\r\n        page--;\r\n        validPage();\r\n    });\r\n};\r\n\r\nconst validPage = () => {\r\n    const btnNext = document.getElementById(\"next\");\r\n    const btnPre = document.getElementById(\"previous\");\r\n\r\n    if (page === 1) {\r\n        btnNext.classList.remove(\"d-none\");\r\n        btnPre.classList.add(\"d-none\");\r\n    } else if (page === 3) {\r\n        btnNext.classList.add(\"d-none\");\r\n        btnPre.classList.remove(\"d-none\");\r\n        showResume();\r\n    } else {\r\n        btnNext.classList.remove(\"d-none\");\r\n        btnPre.classList.remove(\"d-none\");\r\n    }\r\n\r\n    showSection();\r\n};\r\n\r\nconst showResume = () => {\r\n    const { name, date, hour, services } = cita;\r\n\r\n    const divResume = document.querySelector(\".resumeContent\");\r\n\r\n    while (divResume.firstChild) {\r\n        divResume.removeChild(divResume.firstChild);\r\n    }\r\n\r\n    if (Object.values(cita).includes(\"\")) {\r\n        const noService = document.createElement(\"p\");\r\n        noService.textContent = \"Missing service data, time, date or name\";\r\n        noService.classList.add(\"invalitDate\");\r\n\r\n        divResume.appendChild(noService);\r\n\r\n        return;\r\n    }\r\n    const headingDate = document.createElement('h3');\r\n    headingDate.textContent = \"Resume of date\";\r\n    // show the resume\r\n    const nameDate = document.createElement(\"p\");\r\n    nameDate.innerHTML = `<span>Name:</span> ${name}`;\r\n\r\n    const dayDate = document.createElement(\"p\");\r\n    dayDate.innerHTML = `<span>Day:</span> ${date}`;\r\n\r\n    const hourDate = document.createElement(\"p\");\r\n    hourDate.innerHTML = `<span>hour:</span> ${hour}`;\r\n\r\n    const serviceDate = document.createElement('div');\r\n    serviceDate.classList.add('service-resume');\r\n\r\n    const headingService = document.createElement('h3');\r\n    headingService.textContent = \"Resume of your services\";\r\n    serviceDate.appendChild(headingService);\r\n\r\n    let mount = 0;\r\n\r\n    services.forEach((service) => {\r\n        const { name, price } = service;\r\n\r\n        const container = document.createElement(\"div\");\r\n        container.classList.add(\"service-container\");\r\n\r\n        const serviceText = document.createElement(\"p\");\r\n        serviceText.textContent = name;\r\n\r\n        const servicePrice = document.createElement(\"p\");\r\n        servicePrice.textContent = price;\r\n        servicePrice.classList.add('price');\r\n       \r\n        const total = price.split('$');\r\n        mount += parseInt(total[1].trim());\r\n\r\n        container.appendChild(serviceText);\r\n        container.appendChild(servicePrice);\r\n\r\n        serviceDate.appendChild(container);\r\n    });\r\n\r\n    const total = document.createElement('p');\r\n    total.classList.add('total');\r\n    total.innerHTML = `<span>Total mount: </span>$${mount}`;\r\n\r\n    divResume.appendChild(headingDate);\r\n    divResume.appendChild(nameDate);\r\n    divResume.appendChild(dayDate);\r\n    divResume.appendChild(hourDate);\r\n    divResume.appendChild(serviceDate);\r\n    divResume.appendChild(total);\r\n\r\n};\r\n\r\nconst nameDate = () => {\r\n    const inputName = document.getElementById(\"name\");\r\n    inputName.addEventListener(\"input\", (e) => {\r\n        const nameTxt = e.target.value.trim();\r\n\r\n        if (nameTxt === \"\" || nameTxt.length < 3) {\r\n            showAlert(\"eres puto\", \"error\");\r\n        } else {\r\n            const alert = document.querySelector(\".alert\");\r\n            if (alert) {\r\n                alert.remove();\r\n            }\r\n            cita.name = nameTxt;\r\n            // console.log(cita);\r\n        }\r\n    });\r\n};\r\n\r\nconst showAlert = (message, type) => {\r\n    const preAlert = document.querySelector(\".alert\");\r\n    if (preAlert) {\r\n        return;\r\n    }\r\n    // console.log(`Hijole carnal pero el patron dice que ${message}`);\r\n\r\n    const alert = document.createElement(\"div\");\r\n    alert.textContent = message;\r\n    alert.classList.add(\"alert\");\r\n\r\n    if (type === \"error\") {\r\n        alert.classList.add(\"error\");\r\n    }\r\n    const formulario = document.querySelector(\".formulario\");\r\n    formulario.appendChild(alert);\r\n    // console.log(alert);\r\n\r\n    setTimeout(() => {\r\n        alert.remove();\r\n    }, 3000);\r\n};\r\n\r\nconst dayDate = () => {\r\n    const inputDate = document.getElementById(\"date\");\r\n    inputDate.addEventListener(\"input\", (e) => {\r\n        const day = new Date(e.target.value).getUTCDay();\r\n        if ([0, 6].includes(day)) {\r\n            e.preventDefault();\r\n            inputDate.value = \"\";\r\n            showAlert(\"the weekends are not valid dude\", \"error\");\r\n        } else {\r\n            cita.date = inputDate.value;\r\n            // console.log(cita);\r\n        }\r\n        /* const options = {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long'\r\n        };\r\n        console.log(day.toLocaleDateString('es-ES', options)); */\r\n    });\r\n};\r\nconst valitDate = () => {\r\n    const inputDate = document.querySelector(\"#date\");\r\n    const today = new Date();\r\n    let fecha = \"\";\r\n    const year = today.getFullYear();\r\n    const month = today.getMonth() + 1;\r\n    const day = today.getDate();\r\n\r\n    if (month < 10 && day < 10) {\r\n        fecha = `${year}-0${month}-0${day}`;\r\n    } else if (day < 10 && month >= 10) {\r\n        fecha = `${year}-${month}-0${day}`;\r\n    } else {\r\n        fecha = `${year}-${month}-${day}`;\r\n    }\r\n\r\n    inputDate.min = fecha;\r\n};\r\n\r\nconst hourDate = () => {\r\n    const inputHour = document.getElementById(\"hour\");\r\n    inputHour.addEventListener(\"input\", (e) => {\r\n        const dateHour = e.target.value;\r\n        const hour = dateHour.split(\":\");\r\n        if (hour[0] < 10 || hour[0] > 18) {\r\n            showAlert(\"opening hours from 9hrs to 18hrs\", \"error\");\r\n            setTimeout(() => {\r\n                inputHour.value = \"\";\r\n            }, 1000);\r\n        } else {\r\n            cita.hour = dateHour;\r\n        }\r\n    });\r\n};\r\n"]}